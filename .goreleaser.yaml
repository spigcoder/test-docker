# å¿…é¡»æŒ‡å®šç‰ˆæœ¬ä¸º 2
version: 2

project_name: argo-tool

# ====================================
# 1. ç¼–è¯‘é…ç½® (Builds)
# ====================================
builds:
  - id: argo-server
    # âœ… è¿™é‡Œæ˜¯ä½ çš„ä»£ç å…¥å£ï¼Œå¯¹åº” go build ./argo/cmd
    # GoReleaser ä¼šè‡ªåŠ¨å¯»æ‰¾è¯¥ç›®å½•ä¸‹çš„ main åŒ…
    dir: ./argo
    main: ./cmd

    # ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å
    binary: argo-server
    
    env:
      - CGO_ENABLED=0
    
    goos:
      - linux
      - windows
      - darwin
    
    goarch:
      - amd64
      - arm64

# ====================================
# 2. æ‰“åŒ…é…ç½® (Archives)
# ====================================
archives:
  - format: tar.gz
    # è®©æ–‡ä»¶åçœ‹èµ·æ¥åƒ etcd é‚£æ ·è§„èŒƒ
    name_template: >-
      {{ .ProjectName }}-{{ .Version }}-{{ .Os }}-{{ .Arch }}
    
    format_overrides:
      - goos: windows
        format: zip

    # å¦‚æœä½ çš„æ ¹ç›®å½•æœ‰è¿™äº›æ–‡ä»¶ï¼Œå°±åŒ…å«è¿›å»ï¼›æ²¡æœ‰å°±æ³¨é‡Šæ‰
    files:
      - README.md
      - LICENSE

# ====================================
# 3. GitHub å‘å¸ƒé…ç½®
# ====================================
# ğŸš¨ ä¹‹å‰æŠ¥é”™å°±æ˜¯å› ä¸ºç”¨äº† 'releases:'ï¼ŒV2 ç‰ˆæœ¬è¯·ä½¿ç”¨ 'github:'
github:
  # è‡ªåŠ¨æ ¹æ® Tag æ˜¯å¦åŒ…å« -rc / -beta ç­‰åç¼€æ¥æ ‡è®°ä¸º "Prerelease"
  prerelease: auto

# ç”Ÿæˆæ›´æ–°æ—¥å¿—
changelog:
  sort: asc
  filters:
    exclude:
      - '^docs:'
      - '^test:'