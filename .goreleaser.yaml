# æ‚¨çš„é¡¹ç›®åç§°ï¼Œç”¨äº release æ–‡ä»¶å‘½å
project_name: argo-tool

# ====================================
# 1. ç¼–è¯‘é…ç½® (Builds)
# ====================================
builds:
  - id: argo-binary
    # ğŸ“¢ å…³é”®ä¿®æ”¹ï¼šå°†å…¥å£æŒ‡å‘ /argo/cmd ç›®å½•
    main: ./argo/cmd
    # ç¼–è¯‘åäºŒè¿›åˆ¶æ–‡ä»¶çš„åç§°
    binary: argo-server
    
    # ç¦ç”¨ CGOï¼Œç¡®ä¿é™æ€é“¾æ¥ï¼Œæé«˜è·¨å¹³å°å…¼å®¹æ€§
    env:
      - CGO_ENABLED=0
    
    # å®šä¹‰éœ€è¦äº¤å‰ç¼–è¯‘çš„æ“ä½œç³»ç»Ÿ
    goos:
      - linux
      - windows
      - darwin # macOS
      # å¦‚æœéœ€è¦ç±»ä¼¼ etcd å›¾ç‰‡ä¸­çš„ ppc64le/s390xï¼Œè¯·æ·»åŠ åˆ°è¿™é‡Œ
    
    # å®šä¹‰éœ€è¦äº¤å‰ç¼–è¯‘çš„æ¶æ„
    goarch:
      - amd64 # å…¼å®¹ x86_64
      - arm64 # å…¼å®¹ ARM æ¶æ„ (M1/M2 Mac, éƒ¨åˆ† Linux æœåŠ¡å™¨)

# ====================================
# 2. æ‰“åŒ…é…ç½® (Archives)
# ====================================
archives:
  - id: release-archives
    # ğŸ“¢ å…³é”®ä¿®æ”¹ï¼šä½¿ç”¨ - åˆ†å‰²çš„å‘½åæ¨¡æ¿ï¼Œæ ¼å¼ç±»ä¼¼äº etcd
    # äº§ç‰©æ ¼å¼ï¼šargo-tool_v1.0.0_linux_amd64.tar.gz
    name_template: "{{ .ProjectName }}-{{ .Version }}-{{ .Os }}-{{ .Arch }}"

    # é»˜è®¤ä½¿ç”¨ tar.gz
    format: tar.gz
    
    # Windows å¹³å°è¦†ç›–ä¸º zip æ ¼å¼
    format_overrides:
      - goos: windows
        format: zip

    # å‹ç¼©åŒ…å†…åŒ…å«çš„æ–‡ä»¶
    files:
      - README.md
      - LICENSE

# ====================================
# 3. å…¶ä»–é…ç½® (Changelog & Release)
# ====================================
# è‡ªåŠ¨ç”Ÿæˆ Release Note / Changelog
changelog:
  sort: asc

# Release åˆ° GitHub çš„é…ç½®
releases:
  # ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ Release Notes
  prerelease: auto